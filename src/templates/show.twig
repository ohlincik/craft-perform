{% extends "_layouts/cp" %}

{% do view.registerAssetBundle("tungsten\\webform\\assetbundles\\webformcp\\WebFormCPAsset") %}

{% set title = subject %}

{% set crumbs = [
  { label: "WebForm Submissions"|t('webform'), url: url('webform') },
] %}

{% block content %}
    {% for field in fields %}
      {% if field.label == '__section__' %}
        <h2 class="webform--section-heading">{{ field.value }}</h2>
      {% else %}
        <p>
          <strong>{{ field.label }}</strong><br>
          {% if field.value is not defined %}
            -- n/a --
          {% elseif field.value is empty %}
            -- n/a --
          {% else %}
            {% if field.value[0] is not defined and field.value is not empty %}
              {{- field.value -}}
            {% else %}
              {% for option in field.value %}
                {{- option }}{% if not loop.last %},{% endif %}
              {% endfor %}
            {% endif %}
          {% endif %}
        </p>
      {% endif %}
    {% endfor %}
{% endblock %}

{% block details %}
    <div class="meta">
      <h3>Recipients</h3>
      <ul>
        {% for recipient in recipients|split(',') %}
          <li>{{ recipient }}</li>
        {% endfor %}
      </ul>
    </div>
    <hr>
    <div class="meta">
      <h5 class="heading">{{ "Form Title"|t('webform') }}</h5>
      <div class="value">{{ formTitle }}</div>
      <h5 class="heading">{{ "Form Handle"|t('webform') }}</h5>
      <div class="value">{{ formHandle }}</div>
    </div>
    <div class="meta read-only">
        <div class="data">
            <h5 class="heading">{{ "Submitted"|t('webform') }}</h5>
            <div class="value">{{ submitted|datetime('short') }}</div>
        </div>
    </div>
{% endblock %}
